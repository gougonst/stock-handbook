<div class="table-responsive">
    <table class="table table-striped table-bordered" style="table-layout: auto;">
        <thead>
            <tr>
                <th scope="col"></th>
                <th scope="col">代碼</th>
                <th scope="col">股數</th>
                <th scope="col">買價</th>
                <th scope="col">{{ transaction_type === "sell" ? "賣價" : "現價" }}</th>
                <th scope="col">{{ transaction_type === "sell" ? "賣日" : "買日" }}</th>
                <th scope="col" style="white-space: nowrap;">手續費</th>
                <th scope="col" style="white-space: nowrap;">交易稅</th>
                <th v-if="transaction_type === 'sell'" scope="col">損益</th>
                <th v-if="transaction_type === 'sell'" scope="col">報酬率</th>
                <th v-if="transaction_type === 'sell'" scope="col">買本</th>
                <th v-if="transaction_type === 'sell'" scope="col">賣本</th>
            </tr>
        </thead>
        <tbody>
            <tr v-for="(item, index) in items" :key="index">
                <th scope="row">
                    <input class="form-check-input" type="checkbox" v-model="item.checked" @change="selectSellItem(item)">
                </th>
                <td>{{ item.code }}</td>
                <td>{{ item.shares }}</td>
                <td>{{ item.buy_price.toFixed(2) }}</td>
                <td>{{ item.sell_price.toFixed(2) }}</td>
                <td>{{ item.date }}</td>
                <td>{{ item.fee.toFixed() }}</td>
                <td>{{ item.transaction_tax.toFixed() }}</td>
                <td v-if="transaction_type === 'sell'">{{ item.profit_loss.toFixed() }}</td>
                <td v-if="transaction_type === 'sell'">{{ item.return_rate.toFixed(2) }}</td>
                <td v-if="transaction_type === 'sell'">{{ item.buy_principal.toFixed() }}</td>
                <td v-if="transaction_type === 'sell'">{{ item.sell_principal.toFixed() }}</td>
            </tr>
        </tbody>
    </table>
</div>
<div class="container">
    <div class="d-flex">
        <p class="me-5">總筆數: {{ calcTotalCount() }}</p>
        <p class="me-5">總買本: {{ calcTotalBuyPrice().toFixed() }}</p>
        <p v-if="transaction_type === 'sell'" class="me-5">總損益: {{ calcTotalProfitLoss().toFixed() }}</p>
        <p v-if="transaction_type === 'sell'" class="me-5">報酬率: {{ calcTotalReturnRate().toFixed() + "%" }}</p>
    </div>
</div>
